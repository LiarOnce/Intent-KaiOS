(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28a3740c"],{"126c":function(e,t,a){"use strict";a("88d9")},"4de4":function(e,t,a){"use strict";var s=a("23e7"),i=a("b727").filter,n=a("1dde"),o=n("filter");s({target:"Array",proto:!0,forced:!o},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},"6dfb":function(e,t,a){"use strict";var s=a("d4ec"),i=a("bee2"),n=a("262e"),o=a("2caf"),r=(a("159b"),a("9ab4")),u=a("1b40"),l=(a("b0c0"),a("ac1f"),a("5319"),a("b64b"),a("7db0"),a("c740"),a("a434"),function(){function e(t){Object(s["a"])(this,e),this.params={},this.dialogs={},this.name="",this.fragments={},this.pageRequestData={resultCode:d.RESULT_CANCEL,data:{}},this.mVue=t,this.init()}return Object(i["a"])(e,[{key:"init",value:function(){var e=this.mVue;this.name=e.$route.name||"",this.meta=e.$route.meta,e.$route.query&&(e.$route.query.params&&(this.params=JSON.parse(e.$route.query.params)),this.id=e.$route.query.pageId,this.requestPageId=e.$route.query.requestPageId),e.$route.params&&(this.tempParams=e.$route.params)}},{key:"removeParam",value:function(e){this.params.hasOwnProperty(e)&&(delete this.params[e],this.syncParams())}},{key:"pushParam",value:function(e,t){this.params[e]!=t&&(this.params[e]=t,this.syncParams())}},{key:"syncParams",value:function(){var e=Object.assign({},this.mVue.$route.query,{params:JSON.stringify(this.params)});this.mVue.$router.replace({query:e})}},{key:"pushDialog",value:function(e){this.mVue.onPause(),this.dialogs[e._uid]=e}},{key:"removeDialog",value:function(e){delete this.dialogs[e._uid],this.mVue.onResume()}},{key:"getTopDialog",value:function(){var e=Object.keys(this.dialogs);return 0==e.length?null:this.dialogs[e[e.length-1]]}},{key:"reload",value:function(){this.mVue.$pager.reload(this.mVue._uid)}},{key:"close",value:function(){this._close()}},{key:"_close",value:function(){var e=this;if(this.requestPageId){var t=this.mVue.$pager.PageResults.find((function(t){return t.requestPageId==e.requestPageId}));t&&(t.resultCode=this.pageRequestData.resultCode,t.data=this.pageRequestData.data)}this.mVue.$pager.close(this.id)}},{key:"pushFragment",value:function(e){this.fragments[e._uid]=e}},{key:"removeFragment",value:function(e){delete this.fragments[e._uid]}},{key:"onStart",value:function(e){var t=this;if(e){var a=this.mVue.$pager.PageResults.findIndex((function(e){return e.requestPageId==t.id}));if(-1!==a){var s=this.mVue.$pager.PageResults.splice(a,1)[0];this.onPageResult(s.requestCode,s.resultCode,s.data)}}}},{key:"startPageForResult",value:function(e,t){this.mVue.$pager.PageResults.push({requestCode:t,requestPageId:this.id}),this.mVue.$pager.navigateTo(Object.assign({requestPageId:this.id},e))}},{key:"setResult",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.pageRequestData.resultCode=e,this.pageRequestData.data=t}},{key:"onPageResult",value:function(e,t,a){for(var s in this.mVue.onPageResult(e,t,a),this.fragments)this.fragments[s].onPageResult(e,t,a)}}]),e}());a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}var h=function(e){Object(n["a"])(a,e);var t=Object(o["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.mLoading=0,e}return Object(i["a"])(a,[{key:"showLoading",value:function(){switch(c(this.mLoading)){case"boolean":this.mLoading=!0;break;case"number":this.mLoading++;break}}},{key:"closeLoading",value:function(){switch(c(this.mLoading)){case"boolean":this.mLoading=!1;break;case"number":this.mLoading--,this.mLoading<0&&(this.mLoading=0);break}}}]),a}(u["f"]);h=Object(r["a"])([u["a"]],h);var f=h,m=function(e){Object(n["a"])(a,e);var t=Object(o["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.__page=null,e.isActivated=!1,e}return Object(i["a"])(a,[{key:"$page",get:function(){return this.__page}},{key:"created",value:function(){this.__page||(this.__page=new l(this))}},{key:"mounted",value:function(){this.onStart(),this.isActivated=!0}},{key:"destroyed",value:function(){}},{key:"activated",value:function(){this.onResume(),this.isActivated||(this.isActivated=!0)}},{key:"deactivated",value:function(){this.isActivated=!1}},{key:"saveScrollableEls",value:function(){for(var e=this.$el.getElementsByClassName("scroll-x"),t=[],a=0;a<e.length;a++){var s=e[a];t.push({el:s,value:s.scrollLeft})}for(var i=this.$el.getElementsByClassName("scroll-y"),n=[],o=0;o<i.length;o++){var r=i[o];n.push({el:r,value:r.scrollTop})}this.mScrollableEls={x:t,y:n}}},{key:"loadScrollableEls",value:function(){this.mScrollableEls&&(this.mScrollableEls.x.forEach((function(e){e.el&&(e.el.scrollLeft=e.value)})),this.mScrollableEls.y.forEach((function(e){e.el&&(e.el.scrollTop=e.value)})),this.mScrollableEls=null)}},{key:"isSupportClose",value:function(){return!0}},{key:"onBackPressed",value:function(){this.isSupportClose()&&this.close()}},{key:"back",value:function(){var e=this.$page.getTopDialog();e&&e.close()||this.onBackPressed()}},{key:"close",value:function(){this.__page.close()}},{key:"reload",value:function(){this.__page.reload()}},{key:"onStart",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.__page.onStart(t),this.loadScrollableEls(),this.$tv.limitingEl=this.$el,t||this.$nextTick((function(){var t=e.$el.querySelector("[focusable]");t&&e.$tv.requestFocus(t)}))}},{key:"onResume",value:function(){}},{key:"onPause",value:function(){}},{key:"onStop",value:function(){this.saveScrollableEls()}},{key:"startPageForResult",value:function(e,t){this.$page.startPageForResult(e,t)}},{key:"setResult",value:function(e,t){this.$page.setResult(e,t)}},{key:"onPageResult",value:function(e,t,a){}}]),a}(Object(u["c"])(u["f"],f));m.RESULT_OK=-1,m.RESULT_CANCEL=0,m=Object(r["a"])([u["a"]],m);var d=t["a"]=m},"6fe8":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Page",{staticClass:"SelectTheme",attrs:{options:e.mPageOptions}},[a("div",{ref:"Items",staticClass:"Items wh-100 scroll-y"},e._l(e.mItems,(function(t,s){return a("div",{directives:[{name:"focusable",rawName:"v-focusable"}],key:s,ref:"Item",refInFor:!0,staticClass:"Item flex-h",attrs:{selected:t.manifestURL==e.mSelected},on:{click:function(t){return e.onClick_Select(s)},up:function(t){return e.onUp(s)},down:function(t){return e.onDown(s)}}},[a("img",{staticClass:"Icon",attrs:{src:t.icon}}),a("div",{staticClass:"View2 flex-v flex-1"},[a("div",{staticClass:"Name"},[e._v(e._s(t.name))]),t.developer?a("div",{staticClass:"Developer"},[e._v(e._s(t.developer.name))]):e._e(),a("div",{staticClass:"Description"},[e._v(e._s(t.description))]),t.version?a("div",{staticClass:"Type"},[e._v(e._s("v"+t.version))]):e._e()])])})),0)])},i=[],n=a("d4ec"),o=a("bee2"),r=a("262e"),u=a("2caf"),l=(a("b64b"),a("d81d"),a("4de4"),a("b0c0"),a("a4d3"),a("e01a"),a("9ab4")),c=a("1b40"),h=a("6dfb"),f=function(e){Object(r["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(n["a"])(this,a),e=t.apply(this,arguments),e.mPageOptions=e.createPageOptions(),e.mItems=[],e.mSelected="",e}return Object(o["a"])(a,[{key:"createPageOptions",value:function(){var e=this;return{toolBar:{title:"选择主题"},navigationBar:{show:!0,options:{center:"选择",right:"返回",on:{keyPress:{softRight:function(){e.back()}}}}}}}},{key:"mounted",value:function(){var e=this;this.$tv.scrollEl=this.$refs.Items,this.loadData_Apps();var t=navigator.mozSettings.createLock(),a=t.get("theme.selected");a.onsuccess=function(){e.mSelected=a.result["theme.selected"],console.log(e.mSelected)}}},{key:"pickUpAppIconInProperSize",value:function(e,t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:56;return e[Object.keys(e).sort((function(e,t){return(e-t)*(e>=a?1:-1)}))[0]]}},{key:"getAppIconUrl",value:function(e,t,a){if(t=t||e.manifest.icons,!t)return null;var s=this.pickUpAppIconInProperSize(t,a);return/^(http|data)/.test(s)||(s=e.origin+s),s}},{key:"loadData_Apps",value:function(){var e=this,t=navigator.mozApps.mgmt.getAll();t.onsuccess=function(t){var a=t.target.result.reverse();e.mItems=a.filter((function(e){return"theme"==e.manifest.role})).map((function(t){return{icon:e.getAppIconUrl(t),name:t.manifest.name,description:t.manifest.description,type:t.manifest.type,origin:t.origin,version:t.manifest.version,role:t.manifest.role,developer:t.manifest.developer,manifestURL:t.manifestURL,mozApp:t}}))},t.onerror=function(t){e.$prompt.showToast("加载失败"+t)}}},{key:"onClick_Select",value:function(e){var t=this.mItems[e].manifestURL,a=navigator.mozSettings.createLock();a.set({"theme.selected":t}),this.mSelected=t,this.$prompt.showToast("已设置")}},{key:"onUp",value:function(e){this.mItems.length<2||0==e&&this.$tv.requestFocus(this.$refs.Item[this.mItems.length-1])}},{key:"onDown",value:function(e){this.mItems.length<2||e==this.mItems.length-1&&this.$tv.requestFocus(this.$refs.Item[0])}}]),a}(h["a"]);f=Object(l["a"])([c["a"]],f);var m=f,d=m,v=(a("126c"),a("2877")),p=Object(v["a"])(d,s,i,!1,null,"2e5dbb32",null);t["default"]=p.exports},"7db0":function(e,t,a){"use strict";var s=a("23e7"),i=a("b727").find,n=a("44d2"),o="find",r=!0;o in[]&&Array(1)[o]((function(){r=!1})),s({target:"Array",proto:!0,forced:r},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(o)},"88d9":function(e,t,a){},d81d:function(e,t,a){"use strict";var s=a("23e7"),i=a("b727").map,n=a("1dde"),o=n("map");s({target:"Array",proto:!0,forced:!o},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);